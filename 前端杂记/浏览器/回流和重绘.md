# 回流和重绘
- 1.回流就是render tree的相对位置变化，需要重新构建页面
- 2.重绘就是render tree的相对位置没有变化，只是显示的效果变化
- 3.延伸的一个观点：css会影响js执行的速度；因为浏览器对js和ui的处理分别放在一个线程中，两个线程是互斥的，因为js也会修改ui，这是ui线程变化过多，js线程会等待更多时间
- 4.页面加载时，把html代码解析为一个DOM树，包含了所有的DOM节点，包括隐藏的和js动态加载的；把所有的css代码解析成样式结构体；DOM树和样式结构体结合成为render tree，render tree只包含显示的元素，所谓浏览器渲染页面的依据
- 5.每个页面至少有一次回流，render tree第一次渲染
- 6.回流一定引起重绘
- 7.回流的开销比重绘大
- 8.一个元素在自己图层发生回流和重绘时，只在该图层；内部发生，不影响其他部分
- 9.css有一个图层的概念；页面加载DOM之后，浏览器会根据自身制定的一些特殊的css属性对页面划分为一个个图层，如position：adsoulte，position：fixed，transform：transformZ（0）；图层对图层内部的节点做回流和重绘的计算，生成图形和位置，将每个节点绘制填充到图层位图中，图层作为纹理发送到GPU上，最后所有图层合并，显示在浏览器的页面上；滥用图层，会使合并计算过多页面卡顿
- *10.图层形成的常见条件：（chrome）*
   - *1.一个DOM元素拥有3d或透视变换的css属性（persepective, transform）*
   - *2.video标签*
   - *3.拥有3d上下文或2d上下文的canvas节点*
   - *4.混合插件flash*
   - *5.自己做的opcity动画或使用一个动画webkit变换的元素*
   - *6.拥有translate3d或translateZ这两个会使GPU加速的属性*
   - *7.一个包含复合层子节点的元素*
   
- 11.浏览器在处理的时候有一个队列，回流和重绘的操作放在一个队列中，到了一定时间间隔或者数量，会进行一次批量处理（flush），一次完成多个操作
-
